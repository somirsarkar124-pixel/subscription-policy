<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <title>Subscription & Payment</title>
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <style>
    body { font-family: Arial, sans-serif; background:#f9f9f9; color:#333; padding:30px; }
    .card { max-width:760px; margin:20px auto; background:#fff; padding:20px; border-radius:10px; box-shadow:0 6px 20px rgba(0,0,0,0.06); }
    h1 { text-align:center; color:#2c3e50; margin-bottom:10px; }
    table { width:100%; border-collapse:collapse; margin:10px 0 20px; }
    th, td { padding:12px 10px; text-align:center; border-bottom:1px solid #eee; }
    th { background:#4CAF50; color:#fff; font-weight:600; }
    .btn { display:inline-block; padding:12px 18px; background:#4CAF50; color:#fff; border-radius:8px; text-decoration:none; cursor:pointer; border:none; font-size:15px; }
    .btn.secondary { background:#0088cc; }
    .pay-area { text-align:center; margin-top:20px; }
    /* Modal */
    .modal-backdrop { position:fixed; inset:0; background:rgba(0,0,0,0.5); display:none; align-items:center; justify-content:center; z-index:999; }
    .modal { background:#fff; width:360px; max-width:95%; padding:18px; border-radius:10px; box-shadow:0 8px 30px rgba(0,0,0,0.2); text-align:center; }
    .modal h2 { margin:0 0 10px; color:#333; }
    .payment-box { background:#f7f7f7; padding:12px; border-radius:8px; margin:10px 0; word-break:break-all; font-family:monospace; }
    .copy-btn { margin-top:10px; padding:10px 14px; border-radius:8px; border:none; cursor:pointer; font-weight:600; }
    .copy-btn.primary { background:#4CAF50; color:#fff; }
    .copy-btn.secondary { background:#ddd; color:#333; }
    .qr { margin:8px 0; }
    .status { margin-top:8px; color:green; font-weight:600; }
    .close { background:none; border:none; font-size:16px; position:absolute; top:12px; right:14px; cursor:pointer; }
    @media (max-width:420px){ .modal{ padding:14px; } .payment-box{ font-size:14px; } }
  </style>
</head>
<body>

  <div class="card">
    <h1>üîê Subscription Plans</h1>

    <table>
      <tr><th>Duration</th><th>Price</th></tr>
      <tr><td>üìÖ 1 Month</td><td>$20</td></tr>
      <tr><td>üìÖ 3 Months</td><td>$55</td></tr>
      <tr><td>üìÖ 6 Months</td><td>$100</td></tr>
    </table>

    <div style="text-align:center; margin-top:8px;">
      <button class="btn" id="payBtn">üí≥ Pay</button>
    </div>
  </div>

  <!-- Modal -->
  <div class="modal-backdrop" id="modalBackdrop">
    <div class="modal" role="dialog" aria-modal="true" aria-labelledby="modalTitle">
      <button class="close" id="modalClose" title="Close">‚úï</button>
      <h2 id="modalTitle">Payment (BEP20)</h2>

      <div style="font-weight:600; margin-bottom:6px;">Payment Name: <span style="color:#4CAF50">BEP20</span></div>

      <div class="payment-box" id="addressBox">
        0x191d366e8bb26219179897e71f620ad403819208
      </div>

      <!-- QR (Google Charts) -->
      <div class="qr">
        <img id="qrImage" alt="QR code" src="" width="160" height="160" style="border-radius:8px; box-shadow:0 4px 12px rgba(0,0,0,0.08);"/>
      </div>

      <div>
        <button class="copy-btn primary" id="copyBtn">üìã Copy Address</button>
        <button class="copy-btn secondary" id="openInWallet">üîó Open in Wallet</button>
      </div>

      <div class="status" id="statusText" aria-live="polite" style="display:none;">Copied!</div>
    </div>
  </div>

  <script>
    // Payment address (as provided)
    const PAYMENT_ADDRESS = "0x191d366e8bb26219179897e71f620ad403819208";

    // Elements
    const payBtn = document.getElementById('payBtn');
    const modalBackdrop = document.getElementById('modalBackdrop');
    const modalClose = document.getElementById('modalClose');
    const addressBox = document.getElementById('addressBox');
    const copyBtn = document.getElementById('copyBtn');
    const statusText = document.getElementById('statusText');
    const qrImage = document.getElementById('qrImage');
    const openInWallet = document.getElementById('openInWallet');

    // Show modal
    payBtn.addEventListener('click', () => {
      addressBox.textContent = PAYMENT_ADDRESS;
      // QR via Google Chart API (URL encode address)
      const qrData = encodeURIComponent(PAYMENT_ADDRESS);
      qrImage.src = "https://chart.googleapis.com/chart?cht=qr&chs=200x200&chl=" + qrData;
      modalBackdrop.style.display = 'flex';
      statusText.style.display = 'none';
    });

    // Close modal
    modalClose.addEventListener('click', () => modalBackdrop.style.display = 'none');
    modalBackdrop.addEventListener('click', (e) => {
      if (e.target === modalBackdrop) modalBackdrop.style.display = 'none';
    });

    // Copy to clipboard (works in modern browsers)
    async function copyToClipboard(text) {
      try {
        if (navigator.clipboard && navigator.clipboard.writeText) {
          await navigator.clipboard.writeText(text);
        } else {
          // Fallback method
          const ta = document.createElement('textarea');
          ta.value = text;
          document.body.appendChild(ta);
          ta.select();
          document.execCommand('copy');
          document.body.removeChild(ta);
        }
        return true;
      } catch (err) {
        return false;
      }
    }

    copyBtn.addEventListener('click', async () => {
      const ok = await copyToClipboard(PAYMENT_ADDRESS);
      if (ok) {
        statusText.textContent = '‚úÖ Address copied to clipboard';
        statusText.style.display = 'block';
        // small visual feedback
        copyBtn.textContent = '‚úîÔ∏è Copied';
        setTimeout(() => { copyBtn.textContent = 'üìã Copy Address'; }, 2200);
      } else {
        statusText.textContent = '‚ùå Copy failed ‚Äî long-press the address to select and copy';
        statusText.style.display = 'block';
      }
    });

    // Also allow clicking the address box to copy
    addressBox.addEventListener('click', async () => {
      const ok = await copyToClipboard(PAYMENT_ADDRESS);
      if (ok) {
        statusText.textContent = '‚úÖ Address copied to clipboard';
        statusText.style.display = 'block';
      }
    });

    // "Open in Wallet" - try to open a universal wallet deep link (if user has an app)
    openInWallet.addEventListener('click', () => {
      // Try common wallet URL schemes (may vary by wallet). We'll attempt a BSCScan link as fallback.
      const deepLink = "https://bscscan.com/address/" + PAYMENT_ADDRESS;
      window.open(deepLink, '_blank');
    });
  </script>

</body>
</html>
